{"version":3,"sources":["util/util.js","util/sessionStorage.js","global/dataSources.js","contacts/components/ContactList.js","contacts/Contacts.js","contacts/components/ContactDetail.js","contacts/ContactView.js","contacts/components/ContactForm.js","contacts/EditContact.js","contacts/states.js"],"names":["pushToArr","array","item","push","guidChar","c","Math","floor","random","toString","toUpperCase","SessionStorage","sessionStorageKey","sourceUrl","_this","this","Object","classCallCheck","_commit","data","sessionStorage","setItem","JSON","stringify","Promise","resolve","all","thenFn","reject","setTimeout","_data","AppConfig","restDelay","then","search","exampleItem","items","filter","example","keys","reduce","memo","key","indexOf","bind","get","id","find","_idProp","save","put","post","split","map","join","eqFn","arguments","length","undefined","_eqFn","idx","findIndex","Error","concat","remove","splice","fromSession","getItem","l","r","parse","e","console","log","stripHashKey","obj","val","setProp","fetch","resp","json","Contacts","possibleConstructorReturn","getPrototypeOf","call","Folders","Messages","folder","searchObject","_id","emailAddress","ContactsStorage","FoldersStorage","MessagesStorage","ContactList","props","newContact","react_default","a","createElement","lib_esm","to","className","contacts","contact","index","class","params","contactId","href","name","first","last","Component","components_ContactList","style","margin","ContactDetail","company","age","phone","email","address","street","city","state","zip","src","picture","ContactView","composeButton","message","editContactButton","components_ContactDetail","formInputs","label","path","ContactForm","handleChangeFor","_this$props","onContactChange","event","set","_objectSpread","target","value","_this2","inputs","input","type","onChange","EditContact","uiCanExit","trans","canExit","isEqual","DialogService","confirm","handleChangeContact","setState","stateService","transition","router","go","reload","cloneDeep","components_ContactForm","onClick","__webpack_require__","d","__webpack_exports__","states","parent","url","token","resolveFn","requiresAuth","component","deps","$transition$","views","^.^.$default"],"mappings":"wLAGaA,EAAY,SAACC,EAAOC,GAA6B,OAAlBD,EAAME,KAAKD,GAAcD,GAGjEG,EAAW,SAACC,GAAD,MAAa,MAANA,GAAmB,MAANA,EAAY,IAAMC,KAAKC,MAAoB,GAAdD,KAAKE,UAAaC,SAAS,IAAIC,e,QCSlFC,EAOX,SAAAA,EAAaC,EAAmBC,GAAY,IAADC,EAAAC,KAAAC,OAAAC,EAAA,EAAAD,CAAAD,KAAAJ,GAAAI,KAmC3CG,QAAU,SAACC,GAET,OADAC,eAAeC,QAAQP,EAAKF,kBAAmBU,KAAKC,UAAUJ,IACvDK,QAAQC,QAAQN,IArCkBJ,KAyC3CW,IAAM,SAACC,GAIL,OAHc,IAAIH,QAAQ,SAACC,EAASG,GAClCC,WAAW,kBAAMJ,EAAQX,EAAKgB,QAAQC,IAAUC,aAEnCC,KAAKN,IA7CqBZ,KAiD3CmB,OAAS,SAACC,GAKR,OAAOrB,EAAKY,IAAI,SAAAU,GAAK,OAAIA,EAAMC,OAFV,SAACC,EAASpC,GAAV,OACnBc,OAAOuB,KAAKD,GAASE,OAAO,SAACC,EAAMC,GAAP,OAAeD,IAH7BP,EAG8CI,EAAQI,IAF1B,KAAzC,GAEyExC,EAAKwC,IAF/DC,QAAQ,GAAKT,IADhB,IAACA,IAGwE,IACnCU,KAAK,KAAMT,OAtDvBpB,KA0D3C8B,IAAM,SAACC,GACL,OAAOhC,EAAKY,IAAI,SAAAU,GAAK,OAAIA,EAAMW,KAAK,SAAA7C,GAAI,OAAIA,EAAKY,EAAKkC,WAAaF,OA3D1B/B,KA+D3CkC,KAAO,SAAC/C,GACN,OAAOA,EAAKY,EAAKkC,SAAWlC,EAAKoC,IAAIhD,GAAQY,EAAKqC,KAAKjD,IAhEda,KAoE3CoC,KAAO,SAACjD,GAEN,OADAA,EAAKY,EAAKkC,SDpFY,uCAAuCI,MAAM,IAAIC,IAAIjD,GAAUkD,KAAK,ICqFnFxC,EAAKY,IAAI,SAAAU,GAAK,OAAIpC,EAAUoC,EAAOlC,KAAO+B,KAAKnB,EAAKI,QAAQ0B,KAAK9B,KAtE/BC,KA0E3CmC,IAAM,SAAChD,GAA6B,IAAvBqD,EAAsBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf1C,EAAK6C,MACvB,OAAO7C,EAAKY,IAAI,SAAAU,GACd,IAAIwB,EAAMxB,EAAMyB,UAAUN,EAAKX,KAAK,KAAM1C,IAC1C,IAAa,IAAT0D,EAAY,MAAME,MAAM,GAADC,OAAI7D,EAAJ,kBAAA6D,OAAyBjD,IAEpD,OADAsB,EAAMwB,GAAO1D,EACNY,EAAKI,QAAQkB,GAAOH,KAAK,kBAAM/B,OA/ECa,KAoF3CiD,OAAS,SAAC9D,GAA6B,IAAvBqD,EAAsBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAf1C,EAAK6C,MAC1B,OAAO7C,EAAKY,IAAI,SAAAU,GACd,IAAIwB,EAAMxB,EAAMyB,UAAUN,EAAKX,KAAK,KAAM1C,IAC1C,IAAa,IAAT0D,EAAY,MAAME,MAAM,GAADC,OAAI7D,EAAJ,kBAAA6D,OAAyBjD,IAEpD,OADAsB,EAAM6B,OAAOL,EAAK,GACX9C,EAAKI,QAAQkB,GAAOH,KAAK,kBAAM/B,OAxFxC,IAAIiB,EAAM+C,EAAc9C,eAAe+C,QAAQvD,GAa/C,GAXAG,KAAKe,WAAQ4B,EAGb3C,KAAKiC,QAAU,MAGfjC,KAAK4C,MAAQ,SAACS,EAAGC,GAAJ,OAAUD,EAAEtD,EAAKkC,WAAaqB,EAAEvD,EAAKkC,UAGlDjC,KAAKH,kBAAoBA,EAErBsD,EACF,IAEE/C,EAAOG,KAAKgD,MAAMJ,GAClB,MAAOK,GACPC,QAAQC,IAAI,6DAIhB,IAAIC,EAAe,SAACC,GAAD,OD3CA,SAACA,EAAKjC,EAAKkC,GAA0B,OAAhBD,EAAIjC,GAAOkC,EAAYD,EC4C7DE,CAAQF,EAAK,iBAAajB,IAG5B3C,KAAKe,OAASX,EAAOK,QAAQC,QAAQN,GAAQ2D,MAAMjE,GAAWoB,KAAK,SAAA8C,GAAI,OAAGA,EAAKC,UAC5E/C,KAAKlB,KAAKG,SACVe,KAAK,kBAAMX,KAAKgD,MAAMlD,eAAe+C,QAAQvD,MAC7CqB,KAAK,SAAAhC,GAAK,OAAIA,EAAMoD,IAAIqB,M,oGCjCzBO,E,YACJ,SAAAA,IAAc,OAACjE,OAAAC,EAAA,EAAAD,CAAAD,KAAAkE,GAADjE,OAAAkE,EAAA,EAAAlE,CAAAD,KAAAC,OAAAmE,EAAA,EAAAnE,CAAAiE,GAAAG,KAAArE,KAEN,WAAY,8B,2BAHCJ,GAQjB0E,E,YACJ,SAAAA,IAAe,OAAArE,OAAAC,EAAA,EAAAD,CAAAD,KAAAsE,GAAArE,OAAAkE,EAAA,EAAAlE,CAAAD,KAAAC,OAAAmE,EAAA,EAAAnE,CAAAqE,GAAAD,KAAArE,KACP,UAAW,6B,2BAFCJ,GAOhB2E,E,YACJ,SAAAA,IAAc,OAACtE,OAAAC,EAAA,EAAAD,CAAAD,KAAAuE,GAADtE,OAAAkE,EAAA,EAAAlE,CAAAD,KAAAC,OAAAmE,EAAA,EAAAnE,CAAAsE,GAAAF,KAAArE,KAEN,WAAY,8B,sEAGXwE,GACP,IAAIC,EAAe,CAAED,OAAQA,EAAOE,KAGpC,OADAD,GAD6D,IAA5C,CAAC,SAAU,QAAQ7C,QAAQ4C,EAAOE,KAAc,OAAS,MAC/C1D,IAAU2D,aAC9B3E,KAAKmB,OAAOsD,O,GAVA7E,GAcnBgF,EAAkB,IAAIV,EACtBW,EAAiB,IAAIP,EACrBQ,EAAkB,IAAIP,G,+GCNXQ,E,YA/Bb,SAAAA,EAAaC,GAAQ,OAAA/E,OAAAC,EAAA,EAAAD,CAAAD,KAAA+E,GAAA9E,OAAAkE,EAAA,EAAAlE,CAAAD,KAAAC,OAAAmE,EAAA,EAAAnE,CAAA8E,GAAAV,KAAArE,KACbgF,I,sEAIN,IAAIC,EACFC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAQC,GAAI,QACVJ,EAAAC,EAAAC,cAAA,SAAGF,EAAAC,EAAAC,cAAA,UAAQG,UAAU,mBAAkBL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,iBAAmBL,EAAAC,EAAAC,cAAA,8BAKvEI,EAAWxF,KAAKgF,MAAMQ,SAASlD,IAAI,SAACmD,EAASC,GAAV,OACrCR,EAAAC,EAAAC,cAAA,MAAIzD,IAAK+D,GACPR,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAcM,MAAM,YAClBT,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAQC,GAAI,WAAYM,OAAQ,CAACC,UAAUJ,EAAQf,MAAMQ,EAAAC,EAAAC,cAAA,KAAGU,KAAK,OAAOL,EAAQM,KAAKC,MAAQ,IAAMP,EAAQM,KAAKE,WAItH,OACEf,EAAAC,EAAAC,cAAA,OAAKG,UAAWvF,KAAKgF,MAAMO,WACzBL,EAAAC,EAAAC,cAAA,MAAIG,UAAU,wCACZL,EAAAC,EAAAC,cAAA,UAAKH,GACLC,EAAAC,EAAAC,cAAA,kBACCI,Q,GA5BeU,aCsBXhC,E,YAfb,SAAAA,EAAac,GAAQ,OAAA/E,OAAAC,EAAA,EAAAD,CAAAD,KAAAkE,GAAAjE,OAAAkE,EAAA,EAAAlE,CAAAD,KAAAC,OAAAmE,EAAA,EAAAnE,CAAAiE,GAAAG,KAAArE,KACbgF,I,sEAGG,IACJQ,EAAYxF,KAAKgF,MAAjBQ,SACL,OACEN,EAAAC,EAAAC,cAAA,OAAKG,UAAU,sBACbL,EAAAC,EAAAC,cAACe,EAAD,CAAaX,SAAUA,EAAUD,UAAU,gBAC3CL,EAAAC,EAAAC,cAACC,EAAA,EAAD,KAAQH,EAAAC,EAAAC,cAAA,MAAIgB,MAAO,CAACC,OAAQ,YAApB,0B,GAdOH,aCyBRI,E,iLA1BF,IACJb,EAAWzF,KAAKgF,MAAhBS,QACL,OACEP,EAAAC,EAAAC,cAAA,OAAKG,UAAU,UACbL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,WACbL,EAAAC,EAAAC,cAAA,UAAKK,EAAQM,KAAKC,MAAQ,IAAMP,EAAQM,KAAKE,MAC7Cf,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,wBAAsBF,EAAAC,EAAAC,cAAA,WAAMK,EAAQc,UACzCrB,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,oBAAkBF,EAAAC,EAAAC,cAAA,WAAMK,EAAQe,MACrCtB,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,sBAAoBF,EAAAC,EAAAC,cAAA,WAAMK,EAAQgB,QACvCvB,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,sBAAoBF,EAAAC,EAAAC,cAAA,WAAMK,EAAQiB,QACvCxB,EAAAC,EAAAC,cAAA,OAAKG,UAAU,UACbL,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,WAAMK,EAAQkB,QAAQC,OAAO1B,EAAAC,EAAAC,cAAA,WAC1BK,EAAQkB,QAAQE,KAAO,KAAOpB,EAAQkB,QAAQG,MAAQ,IAAMrB,EAAQkB,QAAQI,OAKnF7B,EAAAC,EAAAC,cAAA,OAAKG,UAAU,eACbL,EAAAC,EAAAC,cAAA,OAAK4B,IAAKvB,EAAQwB,gB,GAvBAf,aC4CbgB,E,iLAjCF,IACJzB,EAAWzF,KAAKgF,MAAhBS,QAID0B,EACFjC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAQC,GAAI,qBAAsBM,OAAQ,CAACwB,QAAS,CAAC9B,GAAIG,EAAQiB,SAC/DxB,EAAAC,EAAAC,cAAA,UAAQG,UAAU,mBAChBL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,mBAAmBL,EAAAC,EAAAC,cAAA,yBAMlCiC,EACFnC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAQC,GAAI,SACVJ,EAAAC,EAAAC,cAAA,UAAQG,UAAU,mBAChBL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,iBAAiBL,EAAAC,EAAAC,cAAA,8BAKpC,OACEF,EAAAC,EAAAC,cAAA,OAAKG,UAAU,WACbL,EAAAC,EAAAC,cAACkC,EAAD,CAAe7B,QAASA,IACvB0B,EACA,IACAE,O,GAhCiBnB,a,4OCR1B,IAAMqB,EAAa,CACjB,CAAEC,MAAO,QAAWC,KAAM,cAC1B,CAAED,MAAO,OAAUC,KAAM,aACzB,CAAED,MAAO,UAAWC,KAAM,WAC1B,CAAED,MAAO,MAASC,KAAM,OACxB,CAAED,MAAO,QAAWC,KAAM,SAC1B,CAAED,MAAO,QAAWC,KAAM,SAC1B,CAAED,MAAO,SAAWC,KAAM,kBAC1B,CAAED,MAAO,OAAUC,KAAM,gBACzB,CAAED,MAAO,QAAWC,KAAM,iBAC1B,CAAED,MAAO,MAASC,KAAM,eACxB,CAAED,MAAO,QAAWC,KAAM,YA8BbC,E,2MAtBbC,gBAAkB,SAACF,GAAU,IAADG,EACS7H,EAAKiF,MAAjCS,EADmBmC,EACnBnC,QAASoC,EADUD,EACVC,gBAChB,OAAO,SAAAC,GACLD,EAAgBE,c,qWAAIC,CAAD,GAAMvC,GAAWgC,EAAMK,EAAMG,OAAOC,U,wEAGhD,IAADC,EAAAnI,KACHyF,EAAWzF,KAAKgF,MAAhBS,QACD2C,EAASb,EAAWjF,IAAI,SAAA+F,GAAK,OAC/BnD,EAAAC,EAAAC,cAAA,OAAKzD,IAAK0G,EAAMZ,MACdvC,EAAAC,EAAAC,cAAA,aAAQiD,EAAMb,OACdtC,EAAAC,EAAAC,cAAA,SAAOkD,KAAK,OAAOJ,MAAOpG,cAAI2D,EAAS4C,EAAMZ,MAAOc,SAAUJ,EAAKR,gBAAgBU,EAAMZ,WAG7F,OACEvC,EAAAC,EAAAC,cAAA,OAAKG,UAAU,WACZ6C,O,GArBiBlC,a,QCwEXsC,E,YAtDb,SAAAA,EAAaxD,GAAQ,IAADjF,EAAA,OAAAE,OAAAC,EAAA,EAAAD,CAAAD,KAAAwI,IAClBzI,EAAAE,OAAAkE,EAAA,EAAAlE,CAAAD,KAAAC,OAAAmE,EAAA,EAAAnE,CAAAuI,GAAAnE,KAAArE,KAAMgF,KAORyD,UAAY,SAACC,GACX,GAAI3I,EAAK4I,SAAWC,kBAAQ7I,EAAK+G,MAAMrB,QAAS1F,EAAKiF,MAAMS,SAAU,OAAO,EAI5E,OAAOoD,IAAcC,QAFP,4CACC,oCAZG/I,EAgBpBgJ,oBAAsB,SAACtD,GACrB1F,EAAKiJ,SAAS,CAAEvD,aAjBE1F,EAoBpBmC,KAAO,WAAM,IAEJ+G,EAAgBlJ,EAAKiF,MAAMkE,WAAWC,OAAtCF,aACPrE,IAAgB1C,KAAKnC,EAAK+G,MAAMrB,SAC7BvE,KAAK,kBAAMnB,EAAK4I,SAAU,IAC1BzH,KAAK,kBAAM+H,EAAaG,GAAG,IAAK,KAAM,CAAEC,QAAQ,OAzBjCtJ,EA4BpBkD,OAAS,WAAM,IAERwC,EAAW1F,EAAK+G,MAAhBrB,QACEwD,EAAgBlJ,EAAKiF,MAAMkE,WAAWC,OAAtCF,aACPJ,IAAcC,QAAd,mBAAA9F,OAAyCyC,EAAQM,KAAKC,MAAtD,KAAAhD,OAA+DyC,EAAQM,KAAKE,OACzE/E,KAAK,kBAAM0D,IAAgB3B,OAAOwC,KAClCvE,KAAK,kBAAMnB,EAAK4I,SAAU,IAC1BzH,KAAK,kBAAM+H,EAAaG,GAAG,MAAO,KAAM,CAAEC,QAAQ,OAjCrDtJ,EAAK4I,SAAU,EACf5I,EAAK+G,MAAQ,CACXrB,QAAS6D,oBAAUvJ,EAAKiF,MAAMS,UAJd1F,E,sEAsCT,IACJ0F,EAAWzF,KAAK8G,MAAhBrB,QACL,OACEP,EAAAC,EAAAC,cAAA,OAAKG,UAAU,WACbL,EAAAC,EAAAC,cAACmE,EAAD,CAAa9D,QAASA,EAASoC,gBAAiB7H,KAAK+I,sBACrD7D,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAQC,GAAI,KAAKJ,EAAAC,EAAAC,cAAA,UAAQG,UAAU,mBAAkBL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,gBAAgBL,EAAAC,EAAAC,cAAA,wBAClFF,EAAAC,EAAAC,cAAA,UAAQG,UAAU,kBAAkBiE,QAASxJ,KAAKkC,MAAMgD,EAAAC,EAAAC,cAAA,KAAGG,UAAU,eAAeL,EAAAC,EAAAC,cAAA,qBACpFF,EAAAC,EAAAC,cAAA,UAAQG,UAAU,kBAAkBiE,QAASxJ,KAAKiD,QAAQiC,EAAAC,EAAAC,cAAA,KAAGG,UAAU,gBAAgBL,EAAAC,EAAAC,cAAA,6B,GApDvEc,aC/B1BuD,EAAAC,EAAAC,EAAA,2BAAAC,IAYA,IAmEaA,EAAS,CAnEA,CACpBC,OAAQ,MACR9D,KAAM,WACN+D,IAAK,YACLpJ,QAAS,CAEP,CACEqJ,MAAO,WACPC,UAAW,kBAAMpF,IAAgBjE,SAGrCP,KAAM,CAAE6J,cAAc,GACtBC,UAAWhG,GAOY,CACvB6B,KAAM,mBACN+D,IAAK,cACLpJ,QAAS,CAGP,CACEqJ,MAAO,UACPI,KAAM,CAAC,gBACPH,UAAW,SAACI,GAAD,OAAkBxF,IAAgB9C,IAAIsI,EAAaxE,SAASC,cAG3EqE,UAAWhD,GAWY,CACvBnB,KAAM,wBACN+D,IAAK,QACLO,MAAO,CAILC,eAAgB,CAEdJ,UAAW1B,KAUO,CACtBzC,KAAM,eACN+D,IAAK,OACLI,UAAW1B","file":"static/js/4.6d3e0039.chunk.js","sourcesContent":["/** Some utility functions used by the application */\n\nexport const setProp = (obj, key, val) => { obj[key] = val; return obj; };\nexport const pushToArr = (array, item) => { array.push(item); return array; };\nexport const uniqReduce = (arr, item) => arr.indexOf(item) !== -1 ? arr : pushToArr(arr, item);\nexport const flattenReduce = (arr, item) => arr.concat(item);\nlet guidChar = (c) => c !== 'x' && c !== 'y' ? '-' : Math.floor(Math.random()*16).toString(16).toUpperCase();\nexport const guid = () => \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".split(\"\").map(guidChar).join(\"\");","import {pushToArr, guid, setProp} from \"./util\";\nimport AppConfig from '../global/appConfig';\n\n/**\n* This class simulates a RESTful resource, but the API calls fetch data from\n* Session Storage instead of an HTTP call.\n*\n* Once configured, it loads the initial (pristine) data from the URL provided (using HTTP).\n* It exposes GET/PUT/POST/DELETE-like API that operates on the data.  All the data is also\n* stored in Session Storage.  If any data is modified in memory, session storage is updated.\n* If the browser is refreshed, the SessionStorage object will try to fetch the existing data from\n* the session, before falling back to re-fetching the initial data using HTTP.\n*\n* For an example, please see dataSources.js\n*/\nexport class SessionStorage {\n  /**\n  * Creates a new SessionStorage object\n  *\n  * @param sessionStorageKey The session storage key. The data will be stored in browser's session storage under this key.\n  * @param sourceUrl The url that contains the initial data.\n  */\n  constructor (sessionStorageKey, sourceUrl) {\n    let data, fromSession = sessionStorage.getItem(sessionStorageKey);\n    // A promise for *all* of the data.\n    this._data = undefined;\n\n    // For each data object, the _idProp defines which property has that object's unique identifier\n    this._idProp = \"_id\";\n\n    // A basic triple-equals equality checker for two values\n    this._eqFn = (l, r) => l[this._idProp] === r[this._idProp];\n\n    // Services required to implement the fake REST API\n    this.sessionStorageKey = sessionStorageKey;\n\n    if (fromSession) {\n      try {\n        // Try to parse the existing data from the Session Storage API\n        data = JSON.parse(fromSession);\n      } catch (e) {\n        console.log(\"Unable to parse session messages, retrieving intial data.\");\n      }\n    }\n\n    let stripHashKey = (obj) =>\n      setProp(obj, '$$hashKey', undefined);\n\n    // Create a promise for the data; Either the existing data from session storage, or the initial data via fetch request\n    this._data = (data ? Promise.resolve(data) : fetch(sourceUrl).then(resp =>resp.json()))\n      .then(this._commit)\n      .then(() => JSON.parse(sessionStorage.getItem(sessionStorageKey)))\n      .then(array => array.map(stripHashKey));\n\n  }\n\n  /** Saves all the data back to the session storage */\n  _commit = (data) => {\n    sessionStorage.setItem(this.sessionStorageKey, JSON.stringify(data));\n    return Promise.resolve(data);\n  }\n\n  /** Helper which simulates a delay, then provides the `thenFn` with the data */\n  all = (thenFn) => {\n    let promise = new Promise((resolve, reject) => {\n      setTimeout(() => resolve(this._data), AppConfig.restDelay);\n    });\n    return promise.then(thenFn);\n  }\n\n  /** Given a sample item, returns a promise for all the data for items which have the same properties as the sample */\n  search = (exampleItem) => {\n    let contains = (search, inString) =>\n      (\"\" + inString).indexOf(\"\" + search) !== -1;\n    let matchesExample = (example, item) =>\n      Object.keys(example).reduce((memo, key) => memo && contains(example[key], item[key]), true);\n    return this.all(items => items.filter(matchesExample.bind(null, exampleItem)));\n  }\n\n  /** Returns a promise for the item with the given identifier */\n  get = (id) => {\n    return this.all(items => items.find(item => item[this._idProp] === id));\n  }\n\n  /** Returns a promise to save the item.  It delegates to put() or post() if the object has or does not have an identifier set */\n  save = (item) => {\n    return item[this._idProp] ? this.put(item) : this.post(item);\n  }\n\n  /** Returns a promise to save (POST) a new item.   The item's identifier is auto-assigned. */\n  post = (item) => {\n    item[this._idProp] = guid();\n    return this.all(items => pushToArr(items, item)).then(this._commit.bind(this));\n  }\n\n  /** Returns a promise to save (PUT) an existing item. */\n  put = (item, eqFn = this._eqFn) => {\n    return this.all(items => {\n      let idx = items.findIndex(eqFn.bind(null, item));\n      if (idx === -1) throw Error(`${item} not found in ${this}`);\n      items[idx] = item;\n      return this._commit(items).then(() => item);\n    });\n  }\n\n  /** Returns a promise to remove (DELETE) an item. */\n  remove = (item, eqFn = this._eqFn) => {\n    return this.all(items => {\n      let idx = items.findIndex(eqFn.bind(null, item));\n      if (idx === -1) throw Error(`${item} not found in ${this}`);\n      items.splice(idx, 1);\n      return this._commit(items).then(() => item);\n    });\n  }\n}","import {SessionStorage} from \"../util/sessionStorage\"\nimport AppConfig from './appConfig';\n/**\n* Fake REST Services (Contacts, Folders, Messages) used in the mymessages submodule.\n*\n* Each of these APIs have:\n*\n* .all()\n* .search(exampleItem)\n* .get(id)\n* .save(item)\n* .post(item)\n* .put(item)\n* .remove(item)\n*\n* See ../util/sessionStorage.js for more details, if curious\n*/\n\n/** A fake Contacts REST client API */\nclass Contacts extends SessionStorage {\n  constructor() {\n    // http://beta.json-generator.com/api/json/get/V1g6UwwGx\n    super(\"contacts\", \"static/data/contacts.json\");\n  }\n}\n\n/** A fake Folders REST client API */\nclass Folders extends SessionStorage {\n  constructor() {\n    super('folders', 'static/data/folders.json');\n  }\n}\n\n/** A fake Messages REST client API */\nclass Messages extends SessionStorage {\n  constructor() {\n    // http://beta.json-generator.com/api/json/get/VJl5GbIze\n    super('messages', 'static/data/messages.json');\n  }\n\n  byFolder(folder) {\n    let searchObject = { folder: folder._id };\n    let toFromAttr = [\"drafts\", \"sent\"].indexOf(folder._id) !== -1 ? \"from\" : \"to\";\n    searchObject[toFromAttr] = AppConfig.emailAddress;\n    return this.search(searchObject);\n  }\n}\n\nlet ContactsStorage = new Contacts();\nlet FoldersStorage = new Folders();\nlet MessagesStorage = new Messages();\n\nexport {\n  ContactsStorage,\n  FoldersStorage,\n  MessagesStorage\n}","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {UISref, UISrefActive} from '@uirouter/react';\n/**\n * This component renders a list of contacts.\n *\n * At the top is a \"new contact\" button.\n * Each list item is a clickable link to the `contacts.contact` details substate\n */\nclass ContactList extends Component {\n  static propTypes = {\n    contacts: PropTypes.arrayOf(PropTypes.object)\n  }\n  constructor (props) {\n    super(props);\n  }\n  render () {\n    // This link is a relative ui-sref to the contacts.new state.\n    let newContact = (\n      <UISref to={'.new'}>\n        <a><button className=\"btn btn-primary\"><i className=\"fa fa-pencil\"></i><span>New Contact</span></button></a>\n      </UISref>\n    );\n    // When the current state matches the ui-sref's state (and its parameters)\n    // UISrefActive applies the 'selected' class to the li element\n    let contacts = this.props.contacts.map((contact, index) =>\n      <li key={index}>\n        <UISrefActive class=\"selected\">\n          <UISref to={'.contact'} params={{contactId:contact._id}}><a href=\"asd\">{contact.name.first + ' ' + contact.name.last}</a></UISref>\n        </UISrefActive>\n      </li>\n    );\n    return (\n      <div className={this.props.className}>\n        <ul className=\"selectlist list-unstyled flex nogrow\">\n          <li>{newContact}</li>\n          <li>&nbsp;</li>\n          {contacts}\n        </ul>\n      </div>\n    );\n  }\n}\n\nexport default ContactList;\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {UIView} from '@uirouter/react';\n\nimport ContactList from './components/ContactList';\n/**\n * This component renders the contacts page.\n *\n * On the left is the list of contacts.\n * On the right is the ui-view viewport where contact details appear.\n */\nclass Contacts extends Component {\n  static propTypes = {\n    contacts: PropTypes.arrayOf(PropTypes.object),\n  }\n\n  constructor (props) {\n    super(props);\n  }\n\n  render () {\n    let {contacts} = this.props;\n    return (\n      <div className=\"my-contacts flex-h\">\n        <ContactList contacts={contacts} className=\"flex nogrow\" />\n        <UIView><h4 style={{margin: '1em 2em'}}>Select a contact</h4></UIView>\n      </div>\n    );\n  }\n}\n\nexport default Contacts;\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\n\n/**\n * This component renders a read only view of the details for a single contact.\n */\nclass ContactDetail extends Component {\n  static propTypes = {\n    contact: PropTypes.object\n  }\n  render () {\n    let {contact} = this.props;\n    return (\n      <div className=\"flex-h\">\n        <div className=\"details\">\n          <h3>{contact.name.first + ' ' + contact.name.last}</h3>\n          <div><label>Company</label><div>{contact.company}</div></div>\n          <div><label>Age</label><div>{contact.age}</div></div>\n          <div><label>Phone</label><div>{contact.phone}</div></div>\n          <div><label>Email</label><div>{contact.email}</div></div>\n          <div className=\"flex-h\">\n            <label>Address</label>\n            <div>{contact.address.street}<br />\n              {contact.address.city + ', ' + contact.address.state + ' ' + contact.address.zip}\n            </div>\n          </div>\n        </div>\n\n        <div className=\"flex nogrow\">\n          <img src={contact.picture}/>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ContactDetail;\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {UISref} from '@uirouter/react';\n\nimport ContactDetail from './components/ContactDetail';\n/**\n* This component renders details for a single contact\n*\n* A button messages the contact by linking to `mymessages.compose` state passing the email as a state parameter.\n* Another button edits the contact by linking to `contacts.contact.edit` state.\n*/\n\nclass ContactView extends Component {\n  static propTypes = {\n    contact: PropTypes.object,\n  }\n\n  render () {\n    let {contact} = this.props;\n\n    // This button has an ui-sref to the mymessages.compose state. The ui-sref provides the mymessages.compose\n    // state with an non-url parameter, which is used as the initial message model\n    let composeButton = (\n      <UISref to={'mymessages.compose'} params={{message: {to: contact.email}}}>\n        <button className=\"btn btn-primary\">\n          <i className=\"fa fa-envelope\" /><span>Message</span>\n        </button>\n      </UISref>\n    );\n\n    // This button has a relative ui-sref to the contacts.contact.edit state\n    let editContactButton = (\n      <UISref to={'.edit'}>\n        <button className=\"btn btn-primary\">\n          <i className=\"fa fa-pencil\" /><span>Edit Contact</span>\n        </button>\n      </UISref>\n    );\n\n    return (\n      <div className=\"contact\">\n        <ContactDetail contact={contact} />\n        {composeButton}\n        {' '}\n        {editContactButton}\n      </div>\n    );\n  }\n}\n\nexport default ContactView;\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {get, set} from 'lodash';\n\nconst formInputs = [\n  { label: 'First',   path: 'name.first' },\n  { label: 'Last',   path: 'name.last' },\n  { label: 'Company', path: 'company' },\n  { label: 'Age',   path: 'age' },\n  { label: 'Phone',   path: 'phone' },\n  { label: 'Email',   path: 'email' },\n  { label: 'Street',  path: 'address.street' },\n  { label: 'City',   path: 'address.city' },\n  { label: 'State',   path: 'address.state' },\n  { label: 'Zip',   path: 'address.zip' },\n  { label: 'Image',   path: 'picture' }\n];\n\nclass ContactForm extends Component {\n  static propTypes = {\n    contact: PropTypes.object,\n    onContactChange: PropTypes.func\n  }\n  handleChangeFor = (path) => {\n    const {contact, onContactChange} = this.props;\n    return event => {\n      onContactChange(set({ ...contact }, path, event.target.value));\n    }\n  }\n  render () {\n    let {contact} = this.props;\n    let inputs = formInputs.map(input =>\n      <div key={input.path}>\n        <label>{input.label}</label>\n        <input type=\"text\" value={get(contact, input.path)} onChange={this.handleChangeFor(input.path)}/>\n      </div>\n    );\n    return (\n      <div className=\"details\">\n        {inputs}\n      </div>\n    );\n  }\n}\n\nexport default ContactForm;\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {UISref} from '@uirouter/react';\nimport {isEqual, cloneDeep} from 'lodash';\n\nimport ContactForm from './components/ContactForm';\nimport {ContactsStorage} from '../global/dataSources';\nimport DialogService from '../global/dialogService';\n/**\n* The EditContact component\n*\n* This component is used by both `contacts.contact.edit` and `contacts.new` states.\n*\n* The component makes a copy of the contact data for editing by assigning it to the component state.\n* The new copy and original (pristine) copy are used to determine if the contact is \"dirty\" or not.\n* If the user navigates to some other state while the contact is \"dirty\", the `uiCanExit` component\n* hook asks the user to confirm navigation away, losing any edits.\n*\n* The Delete Contact button is wired to the `remove` method, which:\n* - asks for confirmation from the user\n* - deletes the resource from REST API\n* - navigates back to the contacts grandparent state using relative addressing `^.^`\n*   the `reload: true` option re-fetches the contacts list from the server\n*\n* The Save Contact button is wired to the `save` method which:\n* - saves the REST resource (PUT or POST, depending)\n* - navigates back to the parent state using relative addressing `^`.\n*   when editing an existing contact, this returns to the `contacts.contact` \"view contact\" state\n*   when creating a new contact, this returns to the `contacts` list.\n*   the `reload: true` option re-fetches the contacts resolve data from the server\n*/\nclass EditContact extends Component {\n  static propTypes = {\n    contact: PropTypes.object,\n  }\n\n  constructor (props) {\n    super(props);\n    this.canExit = false;\n    this.state = {\n      contact: cloneDeep(this.props.contact)\n    }\n  }\n\n  uiCanExit = (trans) => {\n    if (this.canExit || isEqual(this.state.contact, this.props.contact)) return true;\n\n    let message = 'You have unsaved changes to this contact.';\n    let question = 'Navigate away and lose changes?';\n    return DialogService.confirm(message, question);\n  }\n\n  handleChangeContact = (contact) => {\n    this.setState({ contact });\n  }\n\n  save = () => {\n    // Save the contact, then go to the parent state (either 'contacts' or 'contacts.contact')\n    const {stateService} = this.props.transition.router;\n    ContactsStorage.save(this.state.contact)\n      .then(() => this.canExit = true)\n      .then(() => stateService.go('^', null, { reload: true }));\n  }\n\n  remove = () => {\n    // Ask for confirmation, then delete the contact, then go to the grandparent state ('contacts')\n    let {contact} = this.state;\n    const {stateService} = this.props.transition.router;\n    DialogService.confirm(`Delete contact: ${contact.name.first} ${contact.name.last}`)\n      .then(() => ContactsStorage.remove(contact))\n      .then(() => this.canExit = true)\n      .then(() => stateService.go(\"^.^\", null, { reload: true }));\n  }\n\n  render () {\n    let {contact} = this.state;\n    return (\n      <div className=\"contact\">\n        <ContactForm contact={contact} onContactChange={this.handleChangeContact} />\n        <hr />\n        <div>\n          <UISref to={'^'}><button className=\"btn btn-primary\"><i className=\"fa fa-close\" /><span>Cancel</span></button></UISref>\n          <button className=\"btn btn-primary\" onClick={this.save}><i className=\"fa fa-save\" /><span>Save</span></button>\n          <button className=\"btn btn-primary\" onClick={this.remove}><i className=\"fa fa-close\" /><span>Delete</span></button>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default EditContact;\n","import {ContactsStorage} from '../global/dataSources';\n\nimport Contacts from './Contacts';\nimport ContactView from './ContactView';\nimport EditContact from './EditContact';\n\n/**\n* This state displays the contact list.\n* It also provides a nested ui-view (viewport) for child states to fill in.\n*\n* The contacts are fetched using a resolve.\n*/\nconst contactsState = {\n  parent: 'app', // declares that 'contacts' is a child of 'app'\n  name: \"contacts\",\n  url: \"/contacts\",\n  resolve: [\n    // Resolve all the contacts. The resolved contacts are injected as props into the Contacts component.\n    {\n      token: 'contacts',\n      resolveFn: () => ContactsStorage.all(),\n    }\n  ],\n  data: { requiresAuth: true },\n  component: Contacts\n};\n\n/**\n* This state displays a single contact.\n* The contact to display is fetched using a resolve, based on the `contactId` parameter.\n*/\nconst viewContactState = {\n  name: 'contacts.contact',\n  url: '/:contactId',\n  resolve: [\n    // Resolve the contact, based on the contactId parameter value.\n    // The resolved contact is provided to the contactComponent's contact binding\n    {\n      token: 'contact',\n      deps: ['$transition$'],\n      resolveFn: ($transition$) => ContactsStorage.get($transition$.params().contactId),\n    }\n  ],\n  component: ContactView\n};\n\n/**\n* This state allows a user to edit a contact\n*\n* The contact data to edit is injected from the parent state's resolve.\n*\n* This state uses view targeting to replace the parent ui-view (which would normally be filled\n* by 'contacts.contact') with the edit contact template/controller\n*/\nconst editContactState = {\n  name: 'contacts.contact.edit',\n  url: '/edit',\n  views: {\n    // Relatively target the grand-parent-state's $default (unnamed) ui-view\n    // This could also have been written using ui-view@state addressing: $default@contacts\n    // Or, this could also have been written using absolute ui-view addressing: !$default.$default.$default\n    '^.^.$default': {\n      //bindings: { pristineContact: \"contact\" },\n      component: EditContact\n    }\n  }\n};\n\n/**\n* This state allows a user to create a new contact\n*\n* The contact data to edit is injected into the component from the parent state's resolve.\n*/\nconst newContactState = {\n  name: 'contacts.new',\n  url: '/new',\n  component: EditContact\n};\n\nexport const states = [contactsState, viewContactState, editContactState, newContactState];\n"],"sourceRoot":""}